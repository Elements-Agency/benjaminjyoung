{{ define "styles" }}
    {{ partial "inside-style.html" . }}

    {{ $bg := .Resources.GetMatch "painting.jpg" }}
    {{ $bg := $bg.Fit "1600x1600 webp q50" }}

    <style>
      #wrapper > .bg {
        background-image: url("../../images/overlay.png"),
          linear-gradient(0deg, rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1)),
          url("{{ $bg.RelPermalink }}");
      }
    </style>
{{ end }}

{{ define "scripts" }}
    {{ partial "inside-scripts.html" . }}
{{ end }}

{{ define "main" }}
  {{ $section := .Site.GetPage "section" .Section }}
    <div id="wrapper">
    {{ block "header" . }}{{ partial "inside-header.html" .}}{{ end }}

    {{ block "nav" . }}{{ partial "inside-navigation.html" .}}{{ end }}

    <div id="main">
        <section class="post">
          {{/* Breadcrumbs */}}
          {{ if .IsPage }}
            <nav class="f7">
              <a href="{{ .Site.BaseURL }}" class="link blue hover-black">Home</a>
              <span class="mh1">/</span>
              <a href="{{ .CurrentSection.RelPermalink }}" class="link blue hover-black">{{ .CurrentSection.Title }}</a>
              <span class="mh1">/</span>
              <a href="{{ .RelPermalink }}" class="link blue hover-black">{{ .Title }}</a>
            </nav>
          {{ end }}
            <br>
            <header class="major">
                <h1>{{- .Title -}}</h1>
            </header>

            <section style="text-align:center;">
              {{ $full := .Resources.GetMatch "painting.jpg" }}
              {{ $full := $full.Fit "1200x1200 webp q90" }}

              <a href="{{ $full.RelPermalink }}" data-position="center" style="display:block; border:#000 4px outset; box-shadow:0 0 30px rgba(0, 0, 0, 0.8); padding:0; background:#000; position:relative; z-index:2;">
                <div style="border:#111 40px solid; box-shadow:inset 0 0 30px rgba(0, 0, 0, 1);">
                  <img src="{{ $full.RelPermalink }}" width="1200" height="1200" style="display:block; width:100%; height:auto; border:#000 4px inset; position:relative; z-index:-1;" alt="{{ .Params.alt }}" title='{{ .Title }} ({{ .Date| time.Format "2006" }}) by {{ .Site.Copyright }}'>
                </div>
              </a>

              <br>

              <div style="text-align:center; line-height:1.2em; position:relative; font-family:Arial;">
                <span style="display:inline-block; text-align:left; color:#444; border:2px #a5a5a5 outset; background:#eee; box-shadow:0 0 7px rgba(0,0,0,0.4); padding:3em; text-shadow:0 0 7px f0c99c;">
                  <span style="font-size:1.5em;">{{ .Params.author | default .Site.Params.author }}</span><br>
                  American, 1990 - Current<br>
                  <br>
                  <strong>{{ .Title }}</strong>
                  {{ .Date | time.Format (default "2006" .Site.Params.date_format) }}<br>
                  {{ .Params.medium }} on {{ .Params.material }}<br>
                </span>
              </div>
            </section>

            <br><br>

            <article>
              <h2>About the {{ .Title }} Painting</h2>
              <p>
                {{/* Hugo uses Go's date formatting is set by example. Here are two formats */}}
                {{ if not .Date.IsZero }}
                  <time class="date" {{ printf `datetime="%s"` (.Date.Format "2006-01-02T15:04:05Z07:00") | safeHTMLAttr }}>
                    {{- .Date | time.Format (default "January 2, 2006" .Site.Params.date_format) -}}
                  </time>
                {{end}}
              </p>
              {{- .Content -}}

              <strong>Tags:</strong>
              {{- partial "tags.html" . -}}
            </article>

            <section>
              <div class="mt6 instapaper_ignoref">
              {{ if .Site.Config.Services.Disqus.Shortname }}
                {{ template "_internal/disqus.html" . }}
              {{ end }}
              {{ if .Site.Params.commentoEnable }}
                {{- partial "commento.html" . -}}
              {{ end }}
              </div>
            </section>
        </section>

        <aside class="w-30-l mt6-l">
          {{- partial "menu-contextual.html" . -}}
        </aside>
    </div>

    {{ block "footer" . }}{{ partialCached "inside-footer.html" . }}{{ end }}
  </div>
{{ end }}

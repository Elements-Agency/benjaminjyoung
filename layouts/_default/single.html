{{ define "styles" }}
    {{ partial "inside-style.html" . }}
{{ end }}

{{ define "scripts" }}
    {{ partial "inside-scripts.html" . }}
{{ end }}

{{ define "main" }}
  {{ $section := .Site.GetPage "section" .Section }}
    <div id="wrapper">
      <!-- Do NOT remove inlinse styles on bg below -->
      <div class="bg fixed" style='position:fixed; top:0; left:0; z-index:-1; width:100vw; height:100vh; background-color:#ddd; background-image:url("/images/background.webp"); background-size:cover; background-position:center; background-repeat:no-repeat; background-attachment:scroll;'></div>

    {{ block "header" . }}{{ partial "inside-header.html" .}}{{ end }}

    {{ block "nav" . }}{{ partial "inside-navigation.html" .}}{{ end }}

    <div id="main">
        <section class="post">
          {{ if .IsPage }}
            <nav class="breadcrumbs">
              <a href="{{ .Site.BaseURL }}#{{ trim .Title " -" | safeURL }}" class="link blue hover-black">Home</a>
              <span class="mh1">/</span>
              <a href="{{ .CurrentSection.RelPermalink }}#{{ trim .Title " -" | safeURL }}" class="link blue hover-black">{{ .CurrentSection.Title }}</a>
              <span class="mh1">/</span>
              <a href="{{ .RelPermalink }}" class="link blue hover-black">{{ .Title }}</a>
            </nav>
          {{ end }}
            <br>
            <header class="major">
                <h1>{{- .Title -}}</h1>
            </header>

            <section style="text-align:center;">
              {{ $full := .Resources.GetMatch "painting.jpg" }}
              {{ $full := $full.Fit "800x800 webp q85" }}

              {{ $top := .Resources.GetMatch "painting.jpg" }}
              {{ $top := $top.Fit "1600x1600 q100" }}

              <a class="painting preview" href="{{ $top.RelPermalink }}" data-gall="progress" data-position="center" style="display:block; border:#000 4px outset; box-shadow:0 0 30px rgba(0, 0, 0, 0.8); padding:0; background:#000; position:relative; z-index:2;" title="{{ .Title }} by {{ .Params.author | default .Site.Params.author }}">
                <div class="frame" style="border:#111 3vw solid; box-shadow:inset 0 0 30px rgba(0, 0, 0, 1);">
                  <div class="frame-inside" style="border:#000 4px inset; position:relative; z-index:-1;">
                    <div class="mat" style="background:#fff; border:#fff 6vw solid; line-height:0.5em;">
                      <br class="clear" style="clear:both;">
                      
                      <img class="canvas" src="{{ $full.RelPermalink }}" width="800" height="800" style="display:block; width:100%; height:auto;" alt="{{ .Params.alt }}" title='{{ .Title }} ({{ .Date| time.Format "2006" }}) by {{ .Site.Copyright }}'>
                      
                      <br class="clear" style="clear:both;">

                      <div class="info" style="font-size:0.5em; width:100%; line-height:1.5em;">
                        <div class="author" style="float:left; text-align:left; width:50%; padding:0 0.5em;">
                          <strong class="title" style="font-size:1.2em;">
                            {{ .Params.author | default .Site.Params.author }}
                          </strong>
                          <br>
                          American, 1990 - Current
                        </div>

                        <div class="description" style="float:right; text-align:right; width:50%; padding:0 0.5em;">
                          <span class="title" style="font-size:1.2em;">
                            <strong>
                              {{ .Title }}
                            </strong>
                            (
                            <em>
                              {{ .Date | time.Format (default "2006" .Site.Params.date_format) }}
                            </em>
                            )
                          </span>
                          <br>
                          {{ .Params.medium }} on {{ .Params.material }}
                        </div>
                      </div>

                      <br class="clear" style="clear:both;">
                    </div>
                  </div>
                </div>
              </a>

              <br>

            </section>

            <br>

            <article>
              <h2>About the {{ .Title }} Painting</h2>

              <p>
                {{ if not .Date.IsZero }}
                  <time class="date" {{ printf `datetime="%s"` (.Date.Format "2006-01-02T15:04:05Z07:00") | safeHTMLAttr }}>
                    <em>{{- .Date | time.Format (default "January 2, 2006" .Site.Params.date_format) -}}</em>
                  </time>
                {{ end }}
              </p>

              {{- .Content -}}

              {{ if $.Params.products }}
                {{ if eq $.Params.status "sold" }}
                  <p><strong>The original has been SOLD and is no longer available.</strong> You can still order prints and merchandise, below:</p>
                {{ end }}
              
                <p id="purchase" class="text-align:right !important;">
                  <div style="float:right; margin-left:0.5em;" class="ec-cart-widget"></div>
                  <div style="float:right;">
                    <script data-cfasync="false" type="text/javascript" src="https://app.ecwid.com/script.js?101772706&data_platform=code&data_date=2024-04-18" charset="utf-8"></script>
                    <script type="text/javascript">Ecwid.init();</script>

                    <a href="/shop/#!/~/cart">View Cart</a>
                  </div>
                </p>

                <br class="clear">
                
                <p>
                  <strong style="color:red; font-weight:bold;">LIMTED TIME:</strong>
                  Save on a site-wide discount on all products.
                  <span id="holiday"></span>
                  <strong>Time Left:</strong>
                  <span id="countdown" style="color:red; font-weight:bold;">4 hours, 20 minutes</span>
                </p>
                <script>
                  var now = new Date();
                  var start = new Date(now.getFullYear(), 0, 0);
                  var diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
                  var oneDay = 1000 * 60 * 60 * 24;
                  var day = Math.floor(diff / oneDay);
                  console.log('Day of year: ' + day);

                  var holiday = 'Dec 31';
                  var datestring = '';

                  if (day <= 15) {
                    var holiday = 'In celebration of the New Year.';
                    var datestring = 'Jan 15';
                  } else if (day <= 31) {
                    var holiday = '';
                    var datestring = 'Feb 1';
                  } else if (day <= 46) {
                    var holiday = 'Save for a Valentines gift!';
                    var datestring = 'Feb 15';
                  } else if (day <= 60) {
                    var holiday = '';
                    var datestring = 'Mar 1';
                  } else if (day <= 78) {
                    var holiday = 'Save for St. Patricks Day.';
                    var datestring = 'Mar 18';
                  } else if (day <= 81) {
                    var holiday = 'Save for upcoming spring!';
                    var datestring = 'Mar 21';
                  } else if (day <= 110) {
                    var holiday = 'Save for Easter.';
                    var datestring = 'Apr 20';
                  } else if (day <= 113) {
                    var holiday = 'Save for Earth Day.';
                    var datestring = 'Apr 23';
                  } else if (day <= 129) {
                    var holiday = 'Save for Mothers Day.';
                    var datestring = 'May 9';
                  } else if (day <= 171) {
                    var holiday = 'Save for Fathers Day.';
                    var datestring = 'Jun 20';
                  } else if (day <= 173) {
                    var holiday = 'Save for the upcoming summer.';
                    var datestring = 'Jun 22';
                  } else if (day <= 259) {
                    var holiday = 'Back to school sale!';
                    var datestring = 'Sep 16';
                  } else if (day <= 266) {
                    var holiday = 'Celebrate the upcoming Autumn.';
                    var datestring = 'Sep 23';
                  } else if (day <= 283) {
                    var holiday = 'Save for World Mental Health Day.';
                    var datestring = 'Oct 10';
                  } else if (day <= 335) {
                    var holiday = 'Black Friday Savings, for the month of November!';
                    var datestring = 'Dec 1';
                  } else if (day <= 362) {
                    var holiday = 'December Holiday Sale!';
                    var datestring = 'Dec 27';
                  } else if (day <= 366) {
                    var holiday = 'New Years Savings!';
                    var datestring = 'Jan 15';
                  }

                  datestring += ', ' + now.getFullYear();
                  
                  var countDownDate = new Date(datestring).getTime();

                  var x = setInterval(function() {
                    var now = new Date().getTime();
                    var distance = countDownDate - now;

                    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    document.getElementById("countdown").innerHTML = days + "d " + hours + "h "
                      + minutes + "m " + seconds + "s ";

                    if (distance < 0) {
                      clearInterval(x);
                      document.getElementById("countdown").innerHTML = "EXPIRED";
                    }
                  }, 1000);

                  document.getElementById('holiday').innerHTML = holiday;
                </script>

                {{ range $.Params.products }}
                  <div style="margin: 0 10px 10px;" class="ecsp ecsp-SingleProduct-v2 ecsp-SingleProduct-v2-bordered ecsp-Product ec-Product-{{ .id }}" itemscope itemtype="http://schema.org/Product" data-single-product-id="{{ .id }}">
                    <a href="/shop/#!/p/{{ .id }}">
                      <div itemprop="image"></div>
                      <div class="ecsp-title" itemprop="name" content="{{ .name }}"></div>
                    </a>
                    <div itemtype="http://schema.org/Offer" itemscope itemprop="offers">
                      <div class="ecsp-productBrowser-price ecsp-price" itemprop="price" content="59">
                        <div itemprop="priceCurrency" content="USD"></div>
                      </div>
                    </div>
                    <div customprop="addtobag"></div>
                    <a href="/shop/#!/p/{{ .id }}">
                      View {{ .name }} &gt;
                    </a>
                  </div>
                  <script data-cfasync="false" type="text/javascript" src="https://app.ecwid.com/script.js?101772706&data_platform=singleproduct_v2" charset="utf-8"></script>
                  <script type="text/javascript">xProduct()</script>
                {{ end }}

                <ul style="list-style:none; text-align:right;">
                  <li style="display:inline-block;">
                      <a href="/shipping">Shipping Policy</a>
                  </li>
                  <li style="display:inline-block;">
                      <a href="/returns">Returns Policy</a>
                  </li>
                </ul>
              {{ end }}

              <hr>

              <div>
                <h3>Share</h3>
                <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=65d9851dc0be3b0019eaef5f&product=inline-share-buttons&source=platform" async="async"></script>
                <div class="sharethis-inline-share-buttons"></div>
              </div>

              <br>

              <h3>Tags</h3>
              {{- partial "tags.html" . -}}
            </article>
        </section>

        <aside class="w-30-l mt6-l">
          {{- partial "menu-contextual.html" . -}}

          <p style="text-align:center;"><strong><a href="/artwork">View All Artwork &gt;</a></strong></p>
        </aside>
    </div>

    {{ block "footer" . }}{{ partialCached "inside-footer.html" . }}{{ end }}
  </div>
  
{{ end }}

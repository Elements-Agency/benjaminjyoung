{{ define "styles" }}
    {{ partial "inside-style.html" . }}
{{ end }}

{{ define "scripts" }}
    {{ partial "inside-scripts.html" . }}

    <script>
      (function (s, e, n, d, er) {
        s['Sender'] = er;
        s[er] = s[er] || function () {
          (s[er].q = s[er].q || []).push(arguments)
        }, s[er].l = 1 * new Date();
        var a = e.createElement(n),
            m = e.getElementsByTagName(n)[0];
        a.async = 1;
        a.src = d;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://cdn.sender.net/accounts_resources/universal.js', 'sender');
      sender('3038bbc46b5014')
    </script>
{{ end }}

{{ define "main" }}
  {{ $section := .Site.GetPage "section" .Section }}
    <div id="wrapper">
      <!-- Do NOT remove inlinse styles on bg below -->
      <div class="bg fixed" style='position:fixed; top:0; left:0; z-index:-1; width:100vw; height:100vh; background-color:#ddd; background-image:url("/images/background.webp"); background-size:cover; background-position:center; background-repeat:no-repeat; background-attachment:scroll;'></div>

    {{ block "header" . }}{{ partial "inside-header.html" .}}{{ end }}

    {{ block "nav" . }}{{ partial "inside-navigation.html" .}}{{ end }}

    <div id="main">
        <article class="post">
            <header class="major">
                <h1>{{ .Title }}</h1>
            </header>

            <div>
              {{- .Content -}}
            </div>

            {{ partial "favorites.html" . }}

            <br>

            <div id="lead">
              <div style="text-align:center;" class="sender-form-field" data-sender-form-id="lxeno1ridjlwgac5vxp"></div>
            </div>

            <hr>

            <h3>More Artwork by Ben Young</h3>

            {{ $posts := slice }}
            {{ range (sort .Site.RegularPages "Params.power" "desc") }}
                {{ if and (eq .Params.favorite false) .Params.featured }}
                    {{ $posts = $posts | append . }}
                {{ end }}
            {{ end }}
            {{ $favorites := $posts | symdiff .Data.Pages }}

            <ul style="text-align: center; padding: 0; margin: 0;">
                {{ range first 12 $favorites }}
                    <li style="list-style:none; display:inline-block; text-align:center;">
                    <a class="thumbnail" href="{{ .RelPermalink }}">
                        {{ $thumbnail := .Resources.GetMatch "painting.jpg" }}
                        {{ $thumbnail := $thumbnail.Fill "200x200 Center" }}
                        {{ $thumbnail := $thumbnail.Resize "200x webp q90" }}

                        <img src="{{ $thumbnail.RelPermalink }}" width="130px" height="130px" loading="lazy" alt="{{- .Title -}}" title='{{ .Title }}' />
                    </a>
                    </li>
                {{ end }}
            </ul>

            <p style="text-align: center;">
                <a href="/" class="button">View Artwork &gt;</a>
            </p>
        </section>
    </div>

    {{ block "footer" . }}{{ partialCached "inside-footer.html" . }}{{ end }}
  </div>
{{ end }}